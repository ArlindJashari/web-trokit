---
import { siteData } from "../../data/siteContent";
import {
  List,
  X,
  Phone,
  InstagramLogo,
  FacebookLogo,
} from "@phosphor-icons/react";
import ServiceGrid from "./ServiceGrid.jsx";
---

<section class="bg-black text-white relative overflow-hidden" id="hero">
  {/* Navigation Header */}
  <header
    id="main-nav"
    class="fixed top-0 left-0 w-full z-[100] transition-all duration-500 py-6 md:py-10"
  >
    <div class="max-w-[1440px] mx-auto px-6 flex items-center justify-between">
      {/* Left: Contact Info (Desktop) */}
      <div class="hidden md:flex flex-col gap-1 reveal-nav-item">
        <span
          class="text-[10px] tracking-[0.4em] font-black text-white/40 uppercase"
          >Assistance</span
        >
        <a
          href={`tel:${siteData.brand.contact.phone[0]}`}
          class="text-sm font-display tracking-widest hover:text-brand transition-colors"
        >
          {siteData.brand.contact.phone[0]}
        </a>
      </div>

      {/* Center: Logo */}
      <div class="reveal-nav-item">
        <a href="/" class="block group">
          <img
            src="/ELITE-LOGO-WHITE.svg"
            alt={siteData.brand.name}
            class="h-8 md:h-16 lg:h-20 w-auto object-contain group-hover:scale-105 transition-transform duration-500"
          />
        </a>
      </div>

      {/* Right: Actions */}
      <div class="flex items-center gap-8 reveal-nav-item">
        <nav class="hidden lg:flex items-center gap-10">
          <a
            href="#services"
            class="text-[10px] tracking-[0.4em] uppercase font-black text-white/60 hover:text-brand transition-colors"
            >Services</a
          >
          <a
            href="#projects"
            class="text-[10px] tracking-[0.4em] uppercase font-black text-white/60 hover:text-brand transition-colors"
            >Galerie</a
          >
          <a
            href="#contact"
            class="text-[10px] tracking-[0.4em] uppercase font-black text-white/60 hover:text-brand transition-colors"
            >Contact</a
          >
        </nav>

        <button
          id="menu-trigger"
          class="lg:hidden p-2 text-white hover:text-brand transition-colors flex items-center gap-3 group"
        >
          <span
            class="hidden md:block text-[10px] tracking-[0.4em] uppercase font-black opacity-60 group-hover:opacity-100"
            >Menu</span
          >
          <div class="flex flex-col gap-1.5 items-end">
            <div
              class="w-6 h-[1.5px] bg-white group-hover:bg-brand transition-all"
            >
            </div>
            <div
              class="w-4 h-[1.5px] bg-white group-hover:bg-brand transition-all"
            >
            </div>
          </div>
        </button>
      </div>
    </div>
  </header>

  {/* Full Viewport Hero Background */}
  <div class="relative h-[100dvh] w-full overflow-hidden">
    <video
      autoplay
      muted
      loop
      playsinline
      class="absolute inset-0 w-full h-full object-cover contrast-[1.1] brightness-[0.7]"
    >
      <source src="/3_ELITE_WEBVIDEO.mp4" type="video/mp4" />
    </video>

    {/* Cinematic Gradients */}
    <div
      class="absolute inset-0 bg-gradient-to-b from-black/80 via-transparent to-black"
    >
    </div>
    <div class="absolute inset-0 bg-black/20"></div>

    {/* Hero Content Center-Bottom */}
    <div class="absolute inset-x-0 bottom-0 z-20 pb-20 md:pb-32">
      <div class="max-w-[1440px] mx-auto px-6">
        <div
          class="flex flex-col items-center md:items-start text-center md:text-left"
        >
          <h1
            class="reveal-hero-title text-[14vw] sm:text-[10vw] md:text-[8vw] lg:text-[10vw] font-display text-white uppercase tracking-tighter leading-[0.8] mb-8"
          >
            RESTAURER <br />
            <span class="text-brand outline-text">L'EXCELLENCE</span>
          </h1>
          <div
            class="reveal-hero-footer w-full flex flex-col md:flex-row items-center md:items-end justify-between gap-8 pt-8 border-t border-white/10"
          >
            <p
              class="max-w-xs text-[10px] tracking-[0.3em] text-white/40 uppercase font-medium leading-loose"
            >
              Expertise automobile & Restauration de Prestige depuis 2018 — BASÉ
              EN VALAIS, SUISSE
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  {/* Mobile Menu Overlay */}
  <div
    id="mobile-menu"
    class="fixed inset-0 bg-[#050505] z-[1000] translate-x-full transition-transform duration-700 ease-[cubic-bezier(0.85,0,0.15,1)]"
  >
    <div class="flex flex-col h-full p-8 md:p-16">
      <div class="flex justify-between items-center mb-20">
        <img src="/ELITE-LOGO-WHITE.svg" alt="Elite" class="h-10 w-auto" />
        <button id="menu-close" class="group p-4">
          <div class="relative w-8 h-8 flex items-center justify-center">
            <div
              class="absolute w-8 h-[1.5px] bg-white rotate-45 group-hover:bg-brand transition-colors"
            >
            </div>
            <div
              class="absolute w-8 h-[1.5px] bg-white -rotate-45 group-hover:bg-brand transition-colors"
            >
            </div>
          </div>
        </button>
      </div>

      <nav class="flex flex-col gap-6 md:gap-10">
        {
          ["services", "projects", "contact"].map((link, i) => (
            <a
              href={`#${link}`}
              class="mobile-nav-link text-6xl md:text-8xl font-display uppercase tracking-tighter hover:text-brand transition-colors flex items-baseline gap-4"
            >
              <span class="text-xs font-mono text-white/20">0{i + 1}</span>
              {link === "projects"
                ? "Galerie"
                : link.charAt(0).toUpperCase() + link.slice(1)}
            </a>
          ))
        }
      </nav>

      <div
        class="mt-auto grid grid-cols-1 md:grid-cols-2 gap-12 pt-12 border-t border-white/5"
      >
        <div class="space-y-4">
          <span
            class="text-[10px] tracking-[0.5em] text-white/30 uppercase font-black"
            >Localisation</span
          >
          <p class="text-sm tracking-widest text-white/80">
            {siteData.brand.contact.address}
          </p>
        </div>
        <div class="space-y-4">
          <span
            class="text-[10px] tracking-[0.5em] text-white/30 uppercase font-black"
            >Social</span
          >
          <div class="flex gap-8">
            <a
              href={siteData.brand.socials.instagram}
              class="text-white hover:text-brand transition-colors"
            >
              <InstagramLogo size={24} weight="light" />
            </a>
            <a
              href={siteData.brand.socials.facebook}
              class="text-white hover:text-brand transition-colors"
            >
              <FacebookLogo size={24} weight="light" />
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  {/* Services Section following the Hero */}
  <div id="services" class="bg-black py-12 md:py-24 relative z-10">
    <div class="max-w-[1440px] mx-auto px-6">
      <ServiceGrid services={siteData.services} client:load />
    </div>
  </div>
</section>

<style>
  .outline-text {
    -webkit-text-stroke: 1px #d4a76a;
    color: transparent;
  }

  @keyframes scrollLine {
    0% {
      transform: translateX(-100%);
    }
    100% {
      transform: translateX(100%);
    }
  }

  .animate-scroll-line {
    animation: scrollLine 2s cubic-bezier(0.19, 1, 0.22, 1) infinite;
  }

  /* Scrolled states */
  #main-nav.scrolled {
    background: rgba(5, 5, 5, 0.8);
    backdrop-filter: blur(20px);
    padding-top: 1.5rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  }
</style>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  // Initial reveal animations
  const tl = gsap.timeline({ defaults: { ease: "power4.out", duration: 1.5 } });

  tl.from(".reveal-nav-item", { opacity: 0, y: -20, stagger: 0.1, duration: 1 })
    .from(".reveal-hero-subtitle", { opacity: 0, x: -30 }, "-=0.5")
    .from(
      ".reveal-hero-title",
      { opacity: 0, scale: 1.05, y: 100, duration: 2 },
      "-=1"
    )
    .from(".reveal-hero-footer", { opacity: 0, y: 30 }, "-=1");

  // Header scroll observer
  const header = document.getElementById("main-nav");
  window.addEventListener("scroll", () => {
    if (window.scrollY > 50) {
      header?.classList.add("scrolled");
    } else {
      header?.classList.remove("scrolled");
    }
  });

  // Mobile Menu Logic
  const menuTrigger = document.getElementById("menu-trigger");
  const menuClose = document.getElementById("menu-close");
  const mobileMenu = document.getElementById("mobile-menu");
  const navLinks = document.querySelectorAll(".mobile-nav-link");

  const openMenu = () => {
    mobileMenu?.classList.remove("translate-x-full");
    document.body.style.overflow = "hidden";
  };

  const closeMenu = () => {
    mobileMenu?.classList.add("translate-x-full");
    document.body.style.overflow = "unset";
  };

  menuTrigger?.addEventListener("click", openMenu);
  menuClose?.addEventListener("click", closeMenu);
  navLinks.forEach((link) => link.addEventListener("click", closeMenu));
</script>
