---
import { siteData } from "../../data/siteContent";
---

<section
  class="bg-[#274C70] text-white border-t border-b border-white/10 relative overflow-hidden"
>
  {/* Subtle texture overlay for premium feel */}
  <div
    class="absolute inset-0 opacity-10 pointer-events-none bg-[url('/noise.png')]"
  >
  </div>

  <div class="max-w-[1440px] mx-auto relative z-10">
    <div class="grid grid-cols-1 md:grid-cols-2">
      {
        siteData.stats.map((stat, index) => (
          <div
            class={`flex items-center gap-8 lg:gap-12 p-8 md:p-12 lg:p-20 ${
              index === 0
                ? "border-b md:border-b-0 md:border-r border-white/20"
                : ""
            }`}
          >
            <div class="flex items-baseline reveal-stat">
              <span
                class="text-7xl md:text-8xl lg:text-[120px] font-display font-black tracking-tighter leading-none stat-number inline-block text-white"
                data-target={stat.value}
              >
                0
              </span>
              <span class="text-4xl lg:text-6xl font-display font-light text-white/90 ml-2">
                {stat.suffix}
              </span>
            </div>

            <div class="flex flex-col gap-2 max-w-sm">
              <h3 class="text-xl md:text-2xl lg:text-3xl font-display font-medium text-white uppercase tracking-tight">
                {stat.label}
              </h3>
              <p class="text-sm text-white/80 leading-relaxed font-sans font-light">
                {stat.subtext}
              </p>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  const stats = document.querySelectorAll(".stat-number");

  stats.forEach((stat) => {
    const targetValue = stat.getAttribute("data-target");
    if (!targetValue) return;

    const target = parseInt(targetValue);
    const obj = { val: 0 };

    gsap.to(obj, {
      val: target,
      duration: 3,
      ease: "power4.out",
      scrollTrigger: {
        trigger: stat,
        start: "top 95%",
      },
      onUpdate: function () {
        stat.innerHTML = Math.ceil(obj.val).toString();
      },
    });
  });
</script>

<style>
  .stat-number {
    letter-spacing: -0.05em;
  }
</style>
